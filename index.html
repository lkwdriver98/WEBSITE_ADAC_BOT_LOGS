<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>ADAC-BOT Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      height: 100vh;
      background-color: #f0f2f5;
    }
    .sidebar {
      width: 240px;
      background: #021e39;
      color: #fff;
      padding: 1rem;
      display: flex;
      flex-direction: column;
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 2rem;
    }
    .sidebar a {
      color: #aabac6;
      padding: 0.75rem;
      text-decoration: none;
      border-radius: 5px;
      margin-bottom: 0.5rem;
      display: block;
    }
    .sidebar a.active,
    .sidebar a:hover {
      background-color: #0658a6;
      color: white;
    }
    main {
      flex: 1;
      padding: 2rem;
      display: none;
    }
    .card {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .modal form {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      width: 300px;
    }
    input, select {
      width: 100%;
      margin: 0.5rem 0 1rem;
      padding: 0.5rem;
    }
    button {
      width: 100%;
      padding: 0.75rem;
      background: #034a9b;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .error-msg {
      color: red;
      text-align: center;
    }
  </style>
</head>
<body>

<div class="modal" id="loginModal">
  <form id="loginForm">
    <h2>Login</h2>
    <label>Benutzername</label>
    <input type="text" id="username" required />
    <label>Passwort</label>
    <input type="password" id="password" required />
    <button type="submit">Einloggen</button>
    <p class="error-msg" id="errorMsg"></p>
    <p style="text-align:center;"><a href="#" id="showRegister">Registrieren</a></p>
  </form>
</div>

<div class="modal" id="registerModal" style="display: none;">
  <form id="registerForm">
    <h2>Registrieren</h2>
    <label>Benutzername</label>
    <input type="text" id="regUsername" required />
    <label>Passwort</label>
    <input type="password" id="regPassword" required />
    <label>Rolle</label>
    <select id="regRole">
      <option value="user">User</option>
      <option value="admin">Admin</option>
    </select>
    <button type="submit">Registrieren</button>
    <p class="error-msg" id="regMsg"></p>
    <p style="text-align:center;"><a href="#" id="showLogin">Zurück zum Login</a></p>
  </form>
</div>

<div class="sidebar">
  <h2>TechFlair Inc.</h2>
  <a href="#" class="active" data-section="overview">Übersicht</a>
  <a href="#" data-section="logs">Logs</a>
  <a href="#" data-section="users" class="admin-only">Benutzerverwaltung</a>
</div>

<main>
  <header>
    <h1>ADAC-BOT Dashboard</h1>
    <span id="userRole"></span>
  </header>

  <section class="card" id="overview">
    <h3>Übersicht</h3>
    <p>Diese Woche wurden 0 Nachrichten gelöscht (Demo).</p>
  </section>

  <section class="card" id="logs" style="display:none;">
    <h3>Logs</h3>
    <p>API nicht verbunden (Demo)</p>
  </section>

  <section class="card admin-only" id="users" style="display:none;">
    <h3>Benutzerverwaltung</h3>
    <p>Keine Benutzer geladen (Demo)</p>
  </section>
</main>

<script>
  const users = {
    admin: { password: 'adminpass', role: 'admin' },
    user: { password: 'userpass', role: 'user' }
  };

  const loginModal = document.getElementById('loginModal');
  const registerModal = document.getElementById('registerModal');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');

  document.getElementById('showRegister').onclick = e => {
    e.preventDefault();
    loginModal.style.display = 'none';
    registerModal.style.display = 'flex';
  };

  document.getElementById('showLogin').onclick = e => {
    e.preventDefault();
    registerModal.style.display = 'none';
    loginModal.style.display = 'flex';
  };

  loginForm.onsubmit = e => {
    e.preventDefault();
    const u = username.value;
    const p = password.value;
    const user = users[u];
    if (user && user.password === p) {
      loginModal.style.display = 'none';
      document.querySelector('main').style.display = 'block';
      document.getElementById('userRole').textContent = user.role;
      document.querySelectorAll('.admin-only').forEach(el => {
        el.style.display = user.role === 'admin' ? 'block' : 'none';
      });
    } else {
      document.getElementById('errorMsg').textContent = 'Ungültige Anmeldedaten';
    }
  };

  registerForm.onsubmit = e => {
    e.preventDefault();
    const u = regUsername.value;
    const p = regPassword.value;
    const r = regRole.value;
    users[u] = { password: p, role: r };
    regMsg.textContent = 'Erfolgreich registriert.';
    setTimeout(() => {
      registerModal.style.display = 'none';
      loginModal.style.display = 'flex';
      regMsg.textContent = '';
    }, 1000);
  };

  document.querySelectorAll('.sidebar a').forEach(link => {
    link.addEventListener('click', () => {
      document.querySelectorAll('.sidebar a').forEach(l => l.classList.remove('active'));
      link.classList.add('active');
      const section = link.dataset.section;
      document.querySelectorAll('main .card').forEach(card => {
        card.style.display = card.id === section ? 'block' : 'none';
      });
    });
  });
</script>

</body>
</html>
